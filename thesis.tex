\documentclass[thesis]{thesis-gwu}[2020/02/03]

% =============================================================================
% --- 1. CORE & FONT SETUP (Robustness First)
% =============================================================================
\usepackage[T1]{fontenc}      % Use modern font encoding for better character and hyphenation support
\usepackage{setspace}         % For controlling line spacing (e.g., in appendix)
\usepackage{amsmath}          % Essential for advanced mathematics typesetting


% =============================================================================
% --- 2. GRAPHICS, FIGURES, & TIKZ
% =============================================================================
\usepackage{graphicx}         % For including images with \includegraphics
\usepackage{float}            % Improved control over float placement (e.g., [H])
\usepackage{pgfplots}         % For creating plots and charts
\pgfplotsset{compat=1.18}
\usepackage{tikz}             % For drawing vector graphics
\usetikzlibrary{shapes, arrows, calc, positioning, shadows, fit, backgrounds}


% Optional: TikZ externalization to speed up compile times.
% Keep this commented out until you have many complex figures.
% \usepgfplotslibrary{external}
% \tikzexternalize
% \tikzsetexternalprefix{cache/}


% =============================================================================
% --- 3. TABLES & FORMATTING
% =============================================================================
\usepackage{booktabs}         % For professional-quality table rules (\toprule, \midrule, \bottomrule)
\usepackage{longtable}        % For tables that span multiple pages
\usepackage{tabularx}         % For tables with columns that automatically adjust width
\usepackage{array}            % For defining custom column types
\usepackage{multirow}         % For creating table cells that span multiple rows
\usepackage{makecell}         % For line breaks and advanced formatting within cells
\usepackage{colortbl}         % For adding color to table cells, rows, or columns
\usepackage{adjustbox}        % For scaling/resizing content (use with caution on tables)

% Custom column types for tables
\newcolumntype{L}[1]{>{\raggedright\arraybackslash}p{#1}}
\newcolumntype{Y}{>{\centering\arraybackslash}X} % Relies on tabularx


% =============================================================================
% --- 4. CAPTIONS & LISTINGS
% =============================================================================
\usepackage{caption}          % For customizing captions of floats
\captionsetup{
    justification=justified,  % Justify multi-line captions
    singlelinecheck=false,    % Apply justification even to single-line captions
    font=it                   % Italicize caption text
}

\usepackage{listings}         % For typesetting source code
\renewcommand{\lstlistingname}{Source Code}
\renewcommand{\lstlistlistingname}{List of Source Code} % Fix for the list name
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
\lstset{
    language=Python,
    backgroundcolor=\color{backcolour},
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\fontsize{8}{9}\selectfont\ttfamily,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showstringspaces=false,
    tabsize=2,
    frame=single,
    rulecolor=\color{black},
    title=\lstname
}
% --- Color Definitions ---
\definecolor{backgroundColour}{gray}{0.96}  % A very light gray for the background

% --- Custom Style for Prompts ---
\lstdefinestyle{promptstyle}{
    language={[plain]tex}, % Treat as plain text
    basicstyle=\ttfamily\small,
    breaklines=true,
    captionpos=b,
    frame=single,
    rulecolor=\color{black!30},
    backgroundcolor=\color{backgroundColour},
    keepspaces=true,
    showspaces=false,
    showstringspaces=false,
    tabsize=2,
    % Highlight the placeholders like {chunk}
    moredelim=**[is][\color{red}\bfseries]{@}{@},
}
% --- Color Definitions ---
\definecolor{commentGreen}{HTML}{228B22}
\definecolor{stringRed}{HTML}{D22D2D}
\definecolor{keywordBlue}{HTML}{0000FF}
\definecolor{jsonBoolean}{HTML}{F0AD4E}
\definecolor{backgroundColour}{gray}{0.96}

% --- 1. Define the JSON language from scratch ---
% This creates a new language called 'JSON' that listings will understand.
\lstdefinelanguage{JSON}{
    keywords={true, false, null},
    keywordstyle=\color{jsonBoolean}\bfseries,
    string=[s]{"}{"}, % Defines strings as anything between double quotes
    stringstyle=\color{stringRed},
    comment=[l]{//},   % Allows for line comments (like in JSONC)
    commentstyle=\color{commentGreen},
    morecomment=[s]{/*}{*/}, % Allows for block comments
    ndkeywords={0,1,2,3,4,5,6,7,8,9} % Ensures numbers are not treated as keywords
}

% --- 2. Define a style that USES our new JSON language ---
\lstdefinestyle{json}{
    language=JSON, % Use the language we just defined above
    backgroundcolor=\color{backgroundColour},
    basicstyle=\ttfamily\small,
    breaklines=true,
    captionpos=b,
    frame=single,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    numberstyle=\tiny\color{gray},
    rulecolor=\color{black!30},
    showspaces=false,
    showstringspaces=false,
    tabsize=2,
}

% --- Custom Cypher Style Definition (no changes needed here) ---
\lstdefinestyle{cypher}{
    language=SQL,
    morekeywords={
        MATCH, WHERE, WITH, RETURN, ORDER, BY, ASC, DESC, OPTIONAL, ALL, IN, NOT,
        CREATE, DELETE, SET, REMOVE, ON, MERGE, AND, OR, XOR,
        CASE, WHEN, THEN, ELSE, END,
        DISTINCT, AS, UNION, SKIP, LIMIT,
        STARTS, ENDS, CONTAINS,
        TRUE, FALSE, NULL,
        collect, nodes, size, toFloat, toLower, id, displayName
    },
    keywordstyle=\color{keywordBlue}\bfseries,
    comment=[l]{//},
    commentstyle=\color{commentGreen}\itshape,
    stringstyle=\color{stringRed},
    basicstyle=\ttfamily\small,
    breaklines=true,
    captionpos=b,
    frame=single,
    rulecolor=\color{black!30},
    backgroundcolor=\color{backgroundColour},
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    numberstyle=\tiny\color{gray},
    showspaces=false,
    showstringspaces=false,
    tabsize=2,
}

% =============================================================================
% --- 5. BIBLIOGRAPHY & REFERENCES (biblatex)
% =============================================================================
\usepackage[style=apa, backend=biber, language=american]{biblatex}
\addbibresource{mybib.bib} % Ensure this file exists and is correct


% =============================================================================
% --- 6. GLOSSARY & ACRONYMS
% =============================================================================
%\usepackage{glossaries}       % Explicitly load the glossaries package
%\makenoidxglossaries         % Command to generate the glossaries/acronyms lists


% =============================================================================
% --- 7. UTILITY & MISC PACKAGES
% =_===========================================================================
\usepackage{comment}          % For commenting out large blocks of text
\usepackage{pdfpages}         % For inserting pages from external PDF files
\usepackage{afterpage}        % For executing commands after the current page is shipped out
%\usepackage{lipsum}           % For dummy text during development (remove for final version)


% =============================================================================
% --- 8. HYPERLINKS (MUST BE LOADED LAST)
% =============================================================================
\hypersetup{
    pdftitle={Using Large Language Models to Convert Documents to Knowledge Graphs to Check for Completeness and Consistency},
    pdfauthor={Michael Wacey},
    pdfsubject={A Brief Description of the Research Field},
    pdfkeywords={keyword1, keyword2, keyword3}
}
% Custom color for biblatex citations, needs to be defined before hyperref uses it
\definecolor{DarkGreen}{rgb}{0,0.5,0}


% =============================================================================
% --- DOCUMENT START
% =============================================================================

% Load frontmatter definitions from your template
\input{tex/frontmatter}

% Populate the glossary/acronym lists with all defined (but unused) terms
\glsaddallunused

%% DOCUMENT AREA
\begin{document}
\include{chapters/chapter1}  
\include{chapters/chapter2}  
\include{chapters/chapter3} 
\include{chapters/chapter4} 
\include{chapters/chapter5}
%% \include{chapters/experiments}
%%\include{chapters/testrefs}

\printbibliography[title=References]

% if you want to enable appendix uncomment the line below. Also you need to create your appendix file in tex/appendix-ex
\appendix
\include{tex/appendix-ex}
%%\include{tex/experiment_summary}
%%\include{tex/08_run_summary}
\end{document}
